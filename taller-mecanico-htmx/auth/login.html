<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>MotorPlus · Login</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- HTMX -->
  <script src="https://unpkg.com/htmx.org@2.0.3"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#22c55e",
            secondary: "#0ea5e9",
            accent: "#f97316",
            deep: "#0f172a",
          },
          boxShadow: {
            neon: "0 0 25px rgba(56, 189, 248, 0.8)",
            neonGreen: "0 0 25px rgba(34, 197, 94, 0.7)",
            neonOrange: "0 0 35px rgba(249, 115, 22, 0.9)",
          },
          backgroundImage: {
            grid:
              "radial-gradient(circle at 1px 1px, rgba(255,255,255,.08) 1px, transparent 0)",
          },
          keyframes: {
            float: {
              "0%, 100%": { transform: "translateY(0px)" },
              "50%": { transform: "translateY(-10px)" },
            },
            shine: {
              "0%": { backgroundPosition: "200% 0" },
              "100%": { backgroundPosition: "-200% 0" },
            },
            pulseGlow: {
              "0%, 100%": { boxShadow: "0 0 15px rgba(14,165,233,.4)" },
              "50%": { boxShadow: "0 0 30px rgba(14,165,233,1)" },
            },
          },
          animation: {
            float: "float 5s ease-in-out infinite",
            shine: "shine 3s linear infinite",
            pulseGlow: "pulseGlow 2.5s ease-in-out infinite",
          },
        },
      },
    };
  </script>

  <style>
    body {
      background: linear-gradient(
        135deg,
        #020617,
        #0f172a,
        #1e3a8a,
        #0f766e,
        #4c1d95
      );
      background-size: 350% 350%;
      animation: gradientMove 18s ease infinite;
    }

    @keyframes gradientMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
  </style>
</head>

<body class="min-h-screen flex items-center justify-center p-6">

  <!-- Fondo decorativo -->
  <div class="fixed inset-0 pointer-events-none">
    <div class="absolute top-20 left-20 bg-cyan-500/20 w-60 h-60 rounded-full blur-3xl animate-pulse"></div>
    <div class="absolute bottom-10 right-20 bg-emerald-500/20 w-72 h-72 rounded-full blur-3xl animate-float"></div>
    <div class="absolute -top-10 right-20 bg-fuchsia-600/20 w-48 h-48 rounded-full blur-3xl animate-pulse"></div>
  </div>

  <!-- CARD PRINCIPAL -->
  <div class="relative w-full max-w-4xl backdrop-blur-xl bg-white/5 border border-white/10 
              rounded-3xl shadow-neon p-10 animate-float">

    <!-- Logo y título -->
  <div class="flex items-center justify-between mb-10">
    <div>
      <h1 class="text-4xl font-bold text-white drop-shadow-lg">
        <span class="bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
        MotorPlus
        </span>
      </h1>
    <p class="text-slate-300 mt-1">Sistema de Taller Mecánico</p>
    </div>

    <div class="w-16 h-16 bg-gradient-to-br from-secondary to-primary rounded-2xl
              shadow-neonGreen flex items-center justify-center animate-pulseGlow overflow-hidden">
      <img
      src="../static/img/IMG_1332.jpeg"
      alt="Logo MotorPlus"
      class="w-full h-full object-cover rounded-2xl"
      />
    </div>
  </div>

    <!-- CONTENIDO -->
    <div class="grid md:grid-cols-2 gap-10">

      <!-- LOGIN IZQUIERDA -->
      <form onsubmit="realLogin(event)" class="space-y-6">

        <h2 class="text-xl font-semibold text-cyan-300">Iniciar Sesión</h2>

        <div class="space-y-2">
          <label class="text-sm text-slate-300">Usuario</label>
          <input id="login-username"
                 placeholder="admin"
                 class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl 
                        text-white placeholder-slate-400 focus:ring-2 focus:ring-secondary
                        hover:bg-white/20 transition-all" />
        </div>

        <div class="space-y-2">
          <label class="text-sm text-slate-300">Contraseña</label>
          <input id="login-password"
                 type="password"
                 placeholder="••••••••"
                 class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl 
                        text-white placeholder-slate-400 focus:ring-2 focus:ring-secondary
                        hover:bg-white/20 transition-all" />
        </div>

        <button
          class="w-full py-3 mt-2 rounded-xl bg-gradient-to-r from-primary to-secondary 
                 text-slate-900 font-bold shadow-neonGreen hover:shadow-neon transition-all
                 hover:scale-[1.02] active:scale-95">
          Ingresar al Panel
        </button>

        <p id="login-message" class="text-sm text-center min-h-[20px]"></p>
      </form>

      <!-- RECUPERACIÓN DERECHA -->
      <form hx-get="http://localhost:8080/api/auth/recuperar"
            hx-target="#recover-msg"
            hx-swap="innerHTML"
            class="space-y-6">

        <h2 class="text-xl font-semibold text-orange-300">Recuperar Contraseña</h2>

        <div class="space-y-2">
          <label class="text-sm text-slate-300">Usuario</label>
          <input name="username"
                 placeholder="admin"
                 class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl 
                        text-white placeholder-slate-400 focus:ring-2 focus:ring-accent
                        hover:bg-white/20 transition-all" />
        </div>

        <button
          class="w-full py-3 mt-2 rounded-xl bg-gradient-to-r from-secondary to-accent 
                 text-slate-900 font-bold shadow-neonOrange hover:shadow-neonOrange 
                 transition-all hover:scale-[1.02] active:scale-95">
          Enviar Instrucciones
        </button>

        <p id="recover-msg" class="text-sm text-center min-h-[20px]"></p>

      </form>
    </div>

  </div>

  <!-- LÓGICA -->
  <script>
    async function realLogin(e) {
      e.preventDefault();

      const username = document.getElementById("login-username").value.trim();
      const password = document.getElementById("login-password").value.trim();
      const msg = document.getElementById("login-message");

      msg.textContent = "Procesando...";
      msg.className = "text-cyan-300 text-sm";

      try {
        const res = await fetch("http://localhost:8080/api/auth/login", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ username, password })
        });

        const text = await res.text();

        if (res.ok) {
          msg.className = "text-emerald-400 text-sm";
          msg.textContent = text;

          setTimeout(() => {
            window.location.href = "../dashboard/index.html";
          }, 900);
        } else {
          msg.className = "text-rose-400 text-sm";
          msg.textContent = text;
        }
      } catch (err) {
        msg.className = "text-rose-400 text-sm";
        msg.textContent = "No se pudo conectar con el backend.";
      }
    }
  </script>

</body>
</html>